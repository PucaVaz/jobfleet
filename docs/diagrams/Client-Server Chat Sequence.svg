<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="667px" preserveAspectRatio="none" style="width:652px;height:667px;background:#FFFFFF;" version="1.1" viewBox="0 0 652 667" width="652px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="165.8633" style="stroke:#000000;stroke-width:1.5;" width="636.8462" x="10" y="215.7305"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="292.2563" x="139.8286" y="327.9727"/><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="424.3477" width="8" x="34.1826" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="38" x2="38" y1="81.4883" y2="505.8359"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="38" x2="38" y1="505.8359" y2="546.791"/><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="39.3105" width="8" x="34.1826" y="546.791"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="38" x2="38" y1="546.791" y2="586.1016"/></g><g><title>ChatClient</title><rect fill="#000000" fill-opacity="0.00000" height="424.3477" width="8" x="188.2524" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="191.8286" x2="191.8286" y1="81.4883" y2="505.8359"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="191.8286" x2="191.8286" y1="505.8359" y2="546.791"/><g><title>ChatClient</title><rect fill="#000000" fill-opacity="0.00000" height="39.3105" width="8" x="188.2524" y="546.791"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="191.8286" x2="191.8286" y1="546.791" y2="586.1016"/></g><g><title>ChatServer</title><rect fill="#000000" fill-opacity="0.00000" height="424.3477" width="8" x="374.4922" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="377.8994" x2="377.8994" y1="81.4883" y2="505.8359"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="377.8994" x2="377.8994" y1="505.8359" y2="546.791"/><g><title>ChatServer</title><rect fill="#000000" fill-opacity="0.00000" height="39.3105" width="8" x="374.4922" y="546.791"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="377.8994" x2="377.8994" y1="546.791" y2="586.1016"/></g><g><title>libtslog</title><rect fill="#000000" fill-opacity="0.00000" height="424.3477" width="8" x="600.519" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="604.1919" x2="604.1919" y1="81.4883" y2="505.8359"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="604.1919" x2="604.1919" y1="505.8359" y2="546.791"/><g><title>libtslog</title><rect fill="#000000" fill-opacity="0.00000" height="39.3105" width="8" x="600.519" y="546.791"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="604.1919" x2="604.1919" y1="546.791" y2="586.1016"/></g><g class="participant participant-head" data-participant="U"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.3652" x="20" y="78.5352">User</text><ellipse cx="38.1826" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M38.1826,21.5 L38.1826,48.5 M25.1826,29.5 L51.1826,29.5 M38.1826,48.5 L25.1826,63.5 M38.1826,48.5 L51.1826,63.5" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="U"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.3652" x="20" y="598.6367">User</text><ellipse cx="38.1826" cy="610.0898" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M38.1826,618.0898 L38.1826,645.0898 M25.1826,626.0898 L51.1826,626.0898 M38.1826,645.0898 L25.1826,660.0898 M38.1826,645.0898 L51.1826,660.0898" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="CC"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84.8477" x="149.8286" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.8477" x="156.8286" y="70.5352">ChatClient</text></g><g class="participant participant-tail" data-participant="CC"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84.8477" x="149.8286" y="585.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.8477" x="156.8286" y="605.6367">ChatClient</text></g><g class="participant participant-head" data-participant="CS"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87.1855" x="334.8994" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.1855" x="341.8994" y="70.5352">ChatServer</text></g><g class="participant participant-tail" data-participant="CS"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87.1855" x="334.8994" y="585.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.1855" x="341.8994" y="605.6367">ChatServer</text></g><g class="participant participant-head" data-participant="Log"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64.6543" x="572.1919" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.6543" x="579.1919" y="70.5352">libtslog</text></g><g class="participant participant-tail" data-participant="Log"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64.6543" x="572.1919" y="585.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.6543" x="579.1919" y="605.6367">libtslog</text></g><g class="message" data-participant-1="U" data-participant-2="CC"><polygon fill="#181818" points="180.2524,108.7988,190.2524,112.7988,180.2524,116.7988,184.2524,112.7988" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="38.1826" x2="186.2524" y1="112.7988" y2="112.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.6973" x="45.1826" y="108.0566">digita mensagem</text></g><g class="message" data-participant-1="CC" data-participant-2="CS"><polygon fill="#181818" points="366.4922,138.1094,376.4922,142.1094,366.4922,146.1094,370.4922,142.1094" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="192.2524" x2="372.4922" y1="142.1094" y2="142.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.6304" x="199.2524" y="137.3672">TCP connect(host, port)</text></g><g class="message" data-participant-1="CS" data-participant-2="Log"><polygon fill="#181818" points="592.519,167.4199,602.519,171.4199,592.519,175.4199,596.519,171.4199" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="378.4922" x2="598.519" y1="171.4199" y2="171.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.4614" x="385.4922" y="166.6777">info("conectado: &lt;peer&gt;")</text></g><g class="message" data-participant-1="CS" data-participant-2="CC"><polygon fill="#181818" points="203.2524,196.7305,193.2524,200.7305,203.2524,204.7305,199.2524,200.7305" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="197.2524" x2="377.4922" y1="200.7305" y2="200.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18.5859" x="209.2524" y="195.9883">OK</text></g><path d="M10,215.7305 L84.4468,215.7305 L84.4468,223.041 L74.4468,233.041 L10,233.041 L10,215.7305" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="165.8633" style="stroke:#000000;stroke-width:1.5;" width="636.8462" x="10" y="215.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="25" y="229.2988">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="72.3218" x="99.4468" y="228.3652">[mensagens]</text><g class="message" data-participant-1="U" data-participant-2="CC"><polygon fill="#181818" points="180.2524,250.3516,190.2524,254.3516,180.2524,258.3516,184.2524,254.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="38.1826" x2="186.2524" y1="254.3516" y2="254.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.0698" x="45.1826" y="249.6094">ENTER em uma linha</text></g><g class="message" data-participant-1="CC" data-participant-2="CS"><polygon fill="#181818" points="366.4922,279.6621,376.4922,283.6621,366.4922,287.6621,370.4922,283.6621" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="192.2524" x2="372.4922" y1="283.6621" y2="283.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.5586" x="199.2524" y="278.9199">send(line + "\n")</text></g><g class="message" data-participant-1="CS" data-participant-2="Log"><polygon fill="#181818" points="592.519,308.9727,602.519,312.9727,592.519,316.9727,596.519,312.9727" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="378.4922" x2="598.519" y1="312.9727" y2="312.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193.6543" x="385.4922" y="308.2305">info("msg de &lt;peer&gt;: &lt;line&gt;")</text></g><path d="M139.8286,327.9727 L251.0918,327.9727 L251.0918,335.2832 L241.0918,345.2832 L139.8286,345.2832 L139.8286,327.9727" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="292.2563" x="139.8286" y="327.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="66.2632" x="154.8286" y="341.541">broadcast</text><g class="message" data-participant-1="CS" data-participant-2="CC"><polygon fill="#181818" points="203.2524,362.5938,193.2524,366.5938,203.2524,370.5938,199.2524,366.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="197.2524" x2="377.4922" y1="366.5938" y2="366.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.2397" x="209.2524" y="361.8516">envia para outros clientes</text></g><g class="message" data-participant-1="U" data-participant-2="CC"><polygon fill="#181818" points="180.2524,405.9043,190.2524,409.9043,180.2524,413.9043,184.2524,409.9043" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="38.1826" x2="186.2524" y1="409.9043" y2="409.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.4214" x="45.1826" y="405.1621">Ctrl+C / EOF</text></g><g class="message" data-participant-1="CC" data-participant-2="CS"><polygon fill="#181818" points="366.4922,435.2148,376.4922,439.2148,366.4922,443.2148,370.4922,439.2148" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="192.2524" x2="372.4922" y1="439.2148" y2="439.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.9556" x="199.2524" y="434.4727">shutdown(SHUT_WR)</text></g><g class="message" data-participant-1="CS" data-participant-2="Log"><polygon fill="#181818" points="592.519,464.5254,602.519,468.5254,592.519,472.5254,596.519,468.5254" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="378.4922" x2="598.519" y1="468.5254" y2="468.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.5132" x="385.4922" y="463.7832">info("desconectado: &lt;peer&gt;")</text></g><g class="message" data-participant-1="CS" data-participant-2="CC"><polygon fill="#181818" points="203.2524,493.8359,193.2524,497.8359,203.2524,501.8359,199.2524,497.8359" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="197.2524" x2="377.4922" y1="497.8359" y2="497.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32.2715" x="209.2524" y="493.0938">close</text></g><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="107.0728" x="267.8145" y="530.4707">encerrando servidor</text><g class="message" data-participant-1="CS" data-participant-2="Log"><polygon fill="#181818" points="592.519,564.1016,602.519,568.1016,592.519,572.1016,596.519,568.1016" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="378.4922" x2="598.519" y1="568.1016" y2="568.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.0269" x="385.4922" y="563.3594">info("Encerrando chat_server...")</text></g><!--SRC=[XL91QiCm4Bph5OjFBcdJUoYv28T2IrFYc5u2OIDjRO6jDPASVhzhfo4fAVIWoynePXWMJU80LQG06A5IFORaZElH9yXqWqctZdpAHbRhMxgaSAHmeilVTEiEARPSJ-GhrqfLyB0K5rY0TRLB21tvY3LrIi2HAeNQwdSmx3sPb3SSqptq7DAT4b8auhC0vpyvpqGa6hIyWAUUA2opa-YSiNvHgcNkpoa-Ae1BXU9jMso0EXWwXDRv1eM-wX79srnmWXbakvqNTu2R4bsimT9F0IaoVbXEqZhmqCCXC5g3CGbo-dxE9tzq2B8O0WyfS0GpJKrZJSbMuxkQJAVGpZGyGh5UNUyLco5P_l9v-Lnjzn-RFvQo5FyRoxGSIQdvV2xPXa90Rras24TdvK04lxKjBa8Zfx2Fqos8LBo_0G00]--></g></svg>